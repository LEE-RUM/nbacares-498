{% extends 'ProjectSite/base.html' %}
{% load static %}
{% load crispy_forms_filters %}

{% block title %}
    <title>Resources</title>
{% endblock %}

{% block more-styles %}
    <link rel="stylesheet" href="{% static 'css/ProjectSite.css' %}">
    <link rel="stylesheet" href="{% static 'css/ContactFilter.css' %}">
{% endblock %}

{% block body %}

    <div class="container pt-2 mb-3">
        <div class="col-12 col-sm-12 col-xxl-10">
            <div class="card card-body">
                <form method="GET" autocomplete="off">
                    {% csrf_token %}
                    <div class="dropdown">
                        <input class="dropdown-toggle px-3 w-100" id="selected-service" data-bs-toggle="dropdown" name="service" value="{{ selectedService }}" />
                        <ul class="dropdown-menu">
                            <!-- Category -->
                            <li><strong class="dropdown-item fw-bold">Category</strong>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" onclick="selectService('All')">All</a>
                            {% for category in categories %}
                                <li><a class="dropdown-item" >{{ category }} &raquo; </a>
                                    <ul class="submenu dropdown-menu">
                                        <!-- Service -->
                                        <li><b class="dropdown-item fw-bold">Service</b>
                                        <li><hr class="dropdown-divider"></li>
                                        {% for service in services %}
                                            {% if service.category == category %}
                                                <li><a class="dropdown-item" onclick="selectService( '{{ service }}' )">{{ service }}</a></li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                    <button class="btn btn-primary rounded mt-2" type="submit" name="search">Search</button>
                    
                    <br>
                </form>
                    <!--Form to search by keyword-->
                    <label class="mt-4"> <b>Keyword</b></label> 
                    
                    <form method="GET">
                        {% csrf_token %}
                    
                       <div class="input-group mb-3">
                        <input class="form-control" type="text"  id="selected" name="service">
                        <button class="btn btn-secondary" type="submit" ><span> <i class="bi bi-search"></i></span></button>
                        
                        </div>
                    
                    </form>
                 
                <!-- End Dropdown -->
            </div> 
        </div>
        <div class="row">
            <div class="col-12 col-sm-12 col-xxl-10">
                <div class="card card-body table-responsive">
                      <table class="table table-lg" >
                        <colgroup>
                            <col style="width: 15%;">
                           <!---- <col style="width: 35%;"> -->
                            <col style="width: 33%;">
                            <col style="width: 17%;">
                        </colgroup>
                        <tr class="">
                            <th>Services</th>
                            <th>Resource Provider</th>
                           <!---- <th>Website</th> -->
                            <th>Phone Number</th>
                        </tr>
                        {% for pagcontact in pagContacts %}
                            <tr>
                                <td>{{ pagcontact.service }}</td>
                                <td><a class="fs-5" style="color: darkblue;" href="//{{ pagcontact.contact_websites }}">{{ pagcontact.contact_resource_provider }}</a></td>
                              <!---- <td><a class="fs-6" style="color: darkblue;" href="//{{ pagcontact.contact_websites }}">{{ pagcontact.contact_websites }}</a></td>   -->                                                             <!--<td>{{ allcontact.contact_location }}</td>-->
                                <td><a style="color: darkblue;" href="tel:{{pagcontact.contact_number}}">{{ pagcontact.contact_number }}</a></td>
                            </tr>
                        {% endfor %}
                    </table>
                    <h5>{{pagContacts}}</h5>
                    {% if pagContacts.has_other_pages %}
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            
                        {% if pagContacts.has_previous %}
                              <li class="page-item"><a class="page-link" href="?page={{ pagContacts.previous_page_number }}">Previous</a></li>
                        {% endif %}
                        {% if pagContacts.has_next %}
                        
                             <li class="page-item"><a class="page-link" href="?page={{ pagContacts.next_page_number }}">Next</a></li>
                        {% endif %}
                    </ul>
                    </nav>
                    {% endif %}
                </div>
            </div>
            
           
        
        </div>
    </div>
{% endblock %}

{% block extrascripts %}

{% endblock extrascripts %}